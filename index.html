<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Google Trends India â€“ Live RSS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    font-family: Arial, Helvetica, sans-serif;
    background: #0f172a;
    color: #e5e7eb;
}

header {
    padding: 15px;
    background: #020617;
    text-align: center;
}

header h1 {
    margin: 0;
    font-size: 20px;
}

#lastUpdate {
    font-size: 12px;
    color: #94a3b8;
}

.container {
    max-width: 900px;
    margin: auto;
    padding: 15px;
}

.trend {
    background: #020617;
    border-radius: 12px;
    margin-bottom: 18px;
    overflow: hidden;
}

.trend-header {
    display: flex;
    gap: 12px;
    padding: 12px;
}

.trend-header img {
    width: 90px;
    height: 90px;
    border-radius: 8px;
    object-fit: cover;
}

.trend-info h2 {
    margin: 0 0 6px;
    font-size: 16px;
}

.meta {
    font-size: 12px;
    color: #94a3b8;
}

.badge {
    display: inline-block;
    margin-top: 6px;
    padding: 4px 8px;
    font-size: 11px;
    border-radius: 6px;
    background: #1e293b;
}

.news {
    border-top: 1px solid #1e293b;
    padding: 10px 12px;
}

.news-item {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
}

.news-item img {
    width: 65px;
    height: 65px;
    border-radius: 6px;
    object-fit: cover;
}

.news-item a {
    color: #38bdf8;
    text-decoration: none;
    font-size: 13px;
    font-weight: bold;
}

.news-item span {
    display: block;
    font-size: 11px;
    color: #94a3b8;
}
</style>
</head>

<body>

<header>
    <h1>Google Trends India ðŸ‡®ðŸ‡³ (Live)</h1>
    <div id="lastUpdate">Loadingâ€¦</div>
</header>

<div class="container" id="feed">
    Loading trendsâ€¦
</div>

<script>
const RSS_URL = "https://trends.google.com/trending/rss?geo=IN&sort=recency";
const PROXY = "https://cors.kawiesh.top/";
const REFRESH_TIME = 60000; // 1 minute

async function loadFeed() {
    try {
        const response = await fetch(PROXY + RSS_URL);
        const text = await response.text();

        const xml = new DOMParser().parseFromString(text, "text/xml");
        const items = xml.querySelectorAll("item");
        const feed = document.getElementById("feed");

        feed.innerHTML = "";

        items.forEach(item => {
            const title = item.querySelector("title")?.textContent || "";
            const pubDate = item.querySelector("pubDate")?.textContent || "";
            const traffic = item.querySelector("ht\\:approx_traffic")?.textContent || "";
            const image = item.querySelector("ht\\:picture")?.textContent || "";
            const imageSource = item.querySelector("ht\\:picture_source")?.textContent || "";

            const trendDiv = document.createElement("div");
            trendDiv.className = "trend";

            trendDiv.innerHTML = `
                <div class="trend-header">
                    <img src="${image}" onerror="this.style.display='none'">
                    <div class="trend-info">
                        <h2>${title}</h2>
                        <div class="meta">${pubDate}</div>
                        ${traffic ? `<div class="badge">ðŸ”¥ ${traffic} searches</div>` : ""}
                        ${imageSource ? `<div class="meta">Image source: ${imageSource}</div>` : ""}
                    </div>
                </div>
                <div class="news"></div>
            `;

            const newsContainer = trendDiv.querySelector(".news");
            const newsItems = item.querySelectorAll("ht\\:news_item");

            newsItems.forEach(n => {
                const nTitle = n.querySelector("ht\\:news_item_title")?.textContent || "";
                const nUrl = n.querySelector("ht\\:news_item_url")?.textContent || "";
                const nImg = n.querySelector("ht\\:news_item_picture")?.textContent || "";
                const nSource = n.querySelector("ht\\:news_item_source")?.textContent || "";

                const newsDiv = document.createElement("div");
                newsDiv.className = "news-item";

                newsDiv.innerHTML = `
                    <img src="${nImg}" onerror="this.style.display='none'">
                    <div>
                        <a href="${nUrl}" target="_blank">${nTitle}</a>
                        <span>${nSource}</span>
                    </div>
                `;

                newsContainer.appendChild(newsDiv);
            });

            feed.appendChild(trendDiv);
        });

        document.getElementById("lastUpdate").textContent =
            "Last updated: " + new Date().toLocaleTimeString();

    } catch (e) {
        document.getElementById("feed").innerHTML =
            "<p style='color:red'>Failed to load feed.</p>";
        console.error(e);
    }
}

loadFeed();
setInterval(loadFeed, REFRESH_TIME);
</script>

</body>
</html>
